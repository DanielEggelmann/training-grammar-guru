#!/usr/bin/env python3
# -*- coding: UTF-8 -*-

"""
Prints the hashes of files eligible to form the test set.

These files are:

    - not from projects in the train/validation set
    - not minimized files
    - have defined vectors in the given vectors file

    **NOTE**: The files are GUARANTEED not to be minified, because of the way
    that the vectors file is created. To ensure this, run::

        tox -- --runslow

    This will run the test in tests/test_corpus.sqlite3 that ensures all files
    yielded by ``iter(corpus)`` are non-minified files.

"""

import sys

from pathlib import Path

from sensibility import Vectors


if __name__ == '__main__':
    _, vector_filename = sys.argv
    assert Path(vector_filename).exists()

    vectors = Vectors.connect_to(vector_filename)
    assert vectors.has_fold_assignments

    for file_hash in vectors.unassigned_files:
        print(file_hash)
